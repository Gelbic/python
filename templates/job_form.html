{% extends "layout.html" %}
{% block title %}Přidat zakázku{% endblock %}
{% block content %}
<h1 class="text-4xl font-bold mb-6">{{ 'Upravit' if job else 'Nová' }} zakázka</h1>
<form action="{{ url_for('add_job') if not job else url_for('edit_job', job_id=job.id) }}" method="post" class="bg-white p-6 rounded-lg shadow-md max-w-lg mx-auto">
    <div class="mb-4">
        <label for="job_number" class="block text-gray-700">Číslo zakázky</label>
        <input type="text" id="job_number" name="job_number" value="{{ job.job_number if job else '' }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
    </div>
    <div class="mb-4">
        <label for="job_name" class="block text-gray-700">Název zakázky</label>
        <input type="text" id="job_name" name="job_name" value="{{ job.job_name if job else '' }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
    </div>
    <div class="mb-4">
        <label for="customer_id" class="block text-gray-700">Zákazník</label>
        <select id="customer_id" name="customer_id" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
            {% for customer in customers %}
                <option value="{{ customer.id }}" {% if job and customer.id == job.customer_id %}selected{% endif %}>{{ customer.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-4">
        <label for="description" class="block text-gray-700">Popis</label>
        <textarea id="description" name="description" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">{{ job.description if job else '' }}</textarea>
    </div>
    <div class="mb-4">
        <label for="status" class="block text-gray-700">Stav</label>
        <select id="status" name="status" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
            <option value="Nová" {% if job and job.status == 'Nová' %}selected{% endif %}>Nová</option>
            <option value="Rozpracovaná" {% if job and job.status == 'Rozpracovaná' %}selected{% endif %}>Rozpracovaná</option>
            <option value="Dokončená" {% if job and job.status == 'Dokončená' %}selected{% endif %}>Dokončená</option>
            <option value="Fakturovaná" {% if job and job.status == 'Fakturovaná' %}selected{% endif %}>Fakturovaná</option>
        </select>
    </div>
    <div class="mb-4">
        <label for="due_date" class="block text-gray-700">Termín dokončení</label>
        <input type="date" id="due_date" name="due_date" value="{{ job.due_date if job else '' }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
    </div>
    <div class="mb-4">
        <label for="price" class="block text-gray-700">Cena zakázky</label>
        <input type="number" step="0.01" id="price" name="price" value="{{ job.price if job else '' }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
    </div>
    <div class="flex justify-end space-x-2">
        <button type="submit" class="bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">Uložit</button>
    </div>
</form>
{% endblock %}